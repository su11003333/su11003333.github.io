(this.webpackJsonpchatify=this.webpackJsonpchatify||[]).push([[9],{234:function(e,t,n){"use strict";var r,a=n(243),c=n.n(a),o="http://34.80.98.184/",i=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://34.80.98.184",REACT_APP_WS_URL:"ws://34.80.98.184:5002",REACT_APP_TOKEN:"xZrvrD9NgrHv4sQxDqXWgrkSfH6XyMCRVwR6bp6NYMVFhRWKRvTYRPk7G4Eed5U4CvvWb5zVMPTvZWpw7vKHGAR68Kw68aNnEkTWvW6Rr5XgXw4W6r3w3cwptyf964MadvrWd4q87PB4hZzW4z4Vg4w8tcwUwyxugASv783H7sC348Hh7QuuXXWP3N7N6eH9hPSaXERAqgc79RmpsCyxMtNR9xcUTBX5G99fAyQ2CVHq5S2Kh6WqyeUyrFhhfPcb",REACT_APP_USER:"goodboy",REACT_APP_PWD:"IL0veVVeb#0109",REACT_APP_WS_MODE:"true",REACT_APP_DEBUG:"true"}).REACT_APP_PATCH_API_URL,u=sessionStorage.getItem("Token"),s=function(){return{headers:{Authorization:"Bearer ".concat(u)}}};t.a={getAccessToken:function(){return r},setAccessToken:function(e){r=e},login:function(e){var t="".concat(o,"Auth/SignIn");return c.a.post(t.replace("undefined",""),e)},registerWs:function(){console.log(u);var e="".concat(o,"Auth/RegisterWs");return c.a.get(e.replace("undefined",""),s())},sendMessage:function(e){var t="".concat(o,"notify/send");return c.a.post(t.replace("undefined",""),e,s())},sendBroadcast:function(e){var t="".concat(o,"notify/broadcast");return c.a.post(t.replace("undefined",""),e,s())},query:function(e){var t="".concat(o,"Summon/Call");return c.a.post(t.replace("undefined",""),e,s())},getSite:function(e){var t="".concat(o,"ui/GetSite");return c.a.get(t.replace("undefined",""),s())},getProvider:function(e){var t="".concat(o,"ui/GetProvider");return c.a.get(t.replace("undefined",""),s())},patchBooks:function(e){var t="".concat(i,"api/Patch");return c.a.post(t.replace("undefined",""),e,s())}}},323:function(e,t,n){"use strict";n.r(t);var r,a=n(240),c=n.n(a),o=n(241),i=n(14),u=n(1),s=n.n(u),d=n(209),l=n(18),f=n(223),p=n(208),m=n(210),v=n(23),g=n(46),b=(n(242),n(225)),h=n(114),w=n(73),y=n.n(w),C=new Uint8Array(16);function j(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(C)}var A=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var k=function(e){return"string"===typeof e&&A.test(e)},x=[],O=0;O<256;++O)x.push((O+256).toString(16).substr(1));var R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(x[e[t+0]]+x[e[t+1]]+x[e[t+2]]+x[e[t+3]]+"-"+x[e[t+4]]+x[e[t+5]]+"-"+x[e[t+6]]+x[e[t+7]]+"-"+x[e[t+8]]+x[e[t+9]]+"-"+x[e[t+10]]+x[e[t+11]]+x[e[t+12]]+x[e[t+13]]+x[e[t+14]]+x[e[t+15]]).toLowerCase();if(!k(n))throw TypeError("Stringified UUID is invalid");return n};var P=function(e,t,n){var r=(e=e||{}).random||(e.rng||j)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return R(r)},T=n(234),S=n(252),_=n(4);t.default=function(e){var t=e.mainEvent,n=e.allSettings,r=e.badWordsData,a=n.keyNameDelay,w=n.keyNameBg,C=n.keyNameImage,j=n.webSocket,A=1e3*+a,k=Object(u.useState)(!1),x=Object(i.a)(k,2),O=x[0],R=x[1],E=(Object(u.useRef)(P()),Object(u.useMemo)((function(){return w}),[w])),I=Object(d.a)((function(e){return{root:{height:"110vh",minHeight:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"url(".concat(E,")"),backgroundPosition:"center center",backgroundSize:"cover",padding:e.spacing(2),"& .MuiTextField-root":{margin:e.spacing(1),width:"100%"},"& .MuiButtonBase-root":{margin:e.spacing(2),color:"black"}},padel:{width:"90%",maxWidth:"300px",color:"black",borderRadius:"10px",backgroundColor:"rgba(255,255,255,0.7)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px",marginBottom:"100px"},keyNameImage:{width:"95%",maxWidth:"400px"}}}))(),W=(Object(l.h)(),Object(u.useState)("")),q=Object(i.a)(W,2),N=q[0],D=q[1],L=function(e,t){void 0===e&&(e=6e4),void 0===t&&(t=1e3);var n=s.a.useState(0),r=n[0],a=n[1],c=s.a.useRef({}),o=function e(n){c.current.started||(c.current.started=n,c.current.lastInterval=n);var r=Math.min(t,c.current.timeLeft||1/0);n-c.current.lastInterval>=r&&(c.current.lastInterval+=r,a((function(e){return c.current.timeLeft=e-r,c.current.timeLeft}))),n-c.current.started<c.current.timeToCount?c.current.requestId=window.requestAnimationFrame(e):(c.current={},a(0))},i=s.a.useCallback((function(t){window.cancelAnimationFrame(c.current.requestId);var n=void 0!==t?t:e;c.current.started=null,c.current.lastInterval=null,c.current.timeToCount=n,c.current.requestId=window.requestAnimationFrame(o),a(n)}),[]),u=s.a.useCallback((function(){window.cancelAnimationFrame(c.current.requestId),c.current.started=null,c.current.lastInterval=null,c.current.timeToCount=c.current.timeLeft}),[]),d=s.a.useCallback((function(){!c.current.started&&c.current.timeLeft>0&&(window.cancelAnimationFrame(c.current.requestId),c.current.requestId=window.requestAnimationFrame(o))}),[]),l=s.a.useCallback((function(){c.current.timeLeft&&(window.cancelAnimationFrame(c.current.requestId),c.current={},a(0))}),[]),f=s.a.useMemo((function(){return{start:i,pause:u,resume:d,reset:l}}),[]);return s.a.useEffect((function(){return function(){return window.cancelAnimationFrame(c.current.requestId)}}),[]),[r,f]}(A,1e3),V=Object(i.a)(L,2),M=V[0],U=V[1].start,F=function(){R(!O)},B=function(e){for(var t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return!0;return!1},H=function(e){for(var t=e.split(" "),n=0;n<t.length;n++){var a=t[n].toLowerCase();if(r.indexOf(a)>-1)return!0}return!1},K=Object(u.useCallback)((function(){var e={name:N,created_at:g.a.firestore.Timestamp.now()};""!==e&&v.b.collection("events").doc(t).collection("names_"+(Math.floor(20*Math.random())+1).toString()).add(e).then((function(e){console.log("message sent")})).catch((function(e){console.log(e)}))})),X=function(){var e=Object(o.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(""===N||1===N.length||M>0)){e.next=4;break}return F(),e.abrupt("return");case 4:if(!B(N)&&!H(N)){e.next=7;break}return F(),e.abrupt("return");case 7:if(U(A),!0!==j){e.next=16;break}return n={message:N},e.next=12,T.a.sendBroadcast(n);case 12:return e.sent,e.abrupt("return");case 16:K();case 17:case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={username:"goodboy",password:"IL0veVVeb#0109"},e.prev=1,e.next=4,T.a.login(t);case 4:n=e.sent,e.prev=5,Object(S.a)(n.data),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(5),console.log("\u767b\u5165\u5931\u6557"),e.abrupt("return");case 13:r=n.data,sessionStorage.setItem("Token",r),T.a.setAccessToken(r),e.next=20;break;case 18:e.prev=18,e.t1=e.catch(1);case 20:case"end":return e.stop()}}),e,null,[[1,18],[5,9]])})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){z()}),[]),Object(_.jsxs)("div",{className:I.root,children:[Object(_.jsx)(b.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:O,onClose:F,TransitionComponent:h.a,message:"\u8acb\u586b\u5165\u6b63\u78ba\u59d3\u540d",action:Object(_.jsx)(m.a,{"aria-label":"close",color:"inherit",onClick:F,children:Object(_.jsx)(y.a,{})})},h.a),Object(_.jsx)("div",{className:I.keyNameImage,children:Object(_.jsx)("img",{style:{width:"100%"},src:C})}),Object(_.jsxs)("div",{className:I.padel,id:"black-input",children:[Object(_.jsx)(f.a,{label:"\u60a8\u7684\u59d3\u540d",variant:"outlined",type:"name",required:!0,value:N,onChange:function(e){return D(e.target.value)}}),Object(_.jsxs)("div",{children:[Object(_.jsx)(p.a,{variant:"contained",onClick:function(){D("")},children:"\u53d6\u6d88"}),Object(_.jsxs)(p.a,{onClick:X,disabled:M>0,variant:"contained",color:"primary",children:[M>0?"\u8acb\u7b49\u4e00\u4e0b\u5594":"\u63d0\u4ea4"," ".concat(M>0?"("+M/1e3+")":"")]})]})]})]})}}}]);
//# sourceMappingURL=9.296ebf3e.chunk.js.map